<mat-card *ngIf="user" class="user-card">
  <mat-card-header>
    <div mat-card-avatar
         class="avatar"
         style="background-image: url({{user.profilePicture || DefaultAvatar}})"></div>
    <span id="user-name">{{user.firstName}} {{user.lastName}}</span>
    <button id="profile-edit" *ngIf="editable" mat-icon-button>
      <mat-icon id="icon-edit" [inline]="true" (click)="setupInfo()">edit</mat-icon>
    </button>
  </mat-card-header>
  <mat-card-content>
    <div class="user-action">
      <button class="action-button" [disabled]="true" mat-stroked-button color="primary">Send message</button>
      <button class="action-button" *ngIf="!editable && (!isFriend && !isMySubscription)" mat-stroked-button color="primary" (click)="addFriend()">Add friend</button>
      <button class="action-button" *ngIf="!editable && isFriend" mat-flat-button color="primary">Your friend</button>
    </div>
    <mat-expansion-panel
      *ngIf="user.city || user.dateOfBirth || user.gender"
      (opened)="bioIsOpened = true"
      (closed)="bioIsOpened = false">
      <mat-expansion-panel-header>
        <mat-panel-description>
          <span class="bio-label" *ngIf="currentUserId == route.params._value.id">Your info:</span>
          <span class="bio-label" *ngIf="currentUserId != route.params._value.id">User info:</span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="bio-content">
        <span class="bio-content-item" *ngIf="user.gender">Gender: {{user.gender}}</span>
        <span class="bio-content-item" *ngIf="user.city">Location: {{user.city}}</span>
        <span class="bio-content-item" *ngIf="user.dateOfBirth">Birth date: {{user.dateOfBirth | date : 'longDate'}}</span>
      </div>
    </mat-expansion-panel>
    <br>
    <br>
    <div class="user-list">
      <app-profiles-list
        [label]="'Friends'"
        [removing]="currentUserId == route.params._value.id"
        [(users)]="friends"
        (removed)="removeFriend($event)">
      </app-profiles-list>
      <br>
      <app-profiles-list
        [label]="'Followers'"
        [(users)]="followers">
      </app-profiles-list>
      <br>
      <app-profiles-list *ngIf="currentUserId == route.params._value.id"
        [label]="'Outgoing requests'"
        [(users)]="outgoingRequests"
        [removing]="currentUserId == route.params._value.id"
        (removed)="removeOutgoingRequest($event)">
      </app-profiles-list>
      <br *ngIf="currentUserId == route.params._value.id">
      <app-profiles-list
        *ngIf="currentUserId == route.params._value.id"
        [label]="'Incoming requests'"
        [approving]="currentUserId == route.params._value.id"
        [(users)]="incomingRequests"
        (approved)="approveFriendRequest($event)"
        (declined)="declineFriendRequest($event)">
      </app-profiles-list>
    </div>
  </mat-card-content>
</mat-card>
<div class="news-feed">
  <app-news-list [news]="news" [user]="user" (OnEdited)="onEdited($event)" (OnDeleted)="onDeleted($event)"></app-news-list>
  <mat-spinner style="margin:0 auto;" *ngIf="showLoader"></mat-spinner>
</div>
